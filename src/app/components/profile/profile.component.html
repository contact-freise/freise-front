<div *transloco="let t" class="container mt-5">
    <div *ngIf="user$ | async as user; else loading" class="profile">
        <div>
            <div class="content">
                <img *ngIf="user.avatarUrl" class="avatarUrl" [src]="user.avatarUrl">
                <label *ngIf="isLoggedUser" for="file-upload-avatarUrl" class="profile-file-upload">
                    ðŸ“·
                </label>
                <label *ngIf="isLoggedUser" for="file-upload-backgroundUrl" class="profile-file-upload">
                    ðŸŒ…
                </label>
            </div>
        </div>
        <img *ngIf="user.backgroundUrl" class="backgroundUrl" [src]="user.backgroundUrl">

        <div class="flex">
            <!--<button class="btn btn-primary">Edit Profile</button>-->

            <input id="file-upload-avatarUrl" type="file" accept="image/*"
                (change)="onFileChange($event, 'avatarUrl')" />

            <input id="file-upload-backgroundUrl" type="file" accept="image/*"
                (change)="onFileChange($event, 'backgroundUrl')" />
        </div>
        <h2>{{user.username}} <small>{{ user.age ?? '' }}{{ user.gender ?? '' }}</small></h2> 
    </div>

    <div *ngIf="user$ | async as user">
        <h3>{{ t('profile.about') }}</h3>
        <div *ngIf="isLoggedUser">
            <textarea (blur)="updateAbout(user)" [(ngModel)]="user.about" [placeholder]="'profile.about-placeholder' | transloco"></textarea>
        </div>
        <div *ngIf="!isLoggedUser">
            <p>{{user.about}}</p>
        </div>
    </div>

    <h3>{{ t('profile.activity') }}</h3>
    <activities [activities$]="activities$"></activities>
    <ng-template #loading>
        <div class="spinner"></div>
    </ng-template>
</div>